{"version":3,"sources":["../history.js"],"names":["firstSection","tagShow","timeframe","$currentSection","$","Promise","resolve","mySpires","then","records","Object","keys","length","remove","jQuery","each","index","record","mySpires_Box","sortPapers","find","fadeIn","sectionShow","toggleClass","hasClass","$ele","first","trigger","setInterval","show","next","clearInterval","hide","tagShowPromise","attr","split","push","all","click","authorShow","tag","val","replace","author","change","method","order","within","undefined","sort","a","b","entryBox","modifiedDate","appendTo","publishedDate"],"mappings":"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","file":"history.js","sourcesContent":["// TODO: Write a more robust tag, authors retrieval system.\n\nlet firstSection = true;\n\nfunction tagShow(timeframe) {\n    let $currentSection = $(\"#section-\" + timeframe);\n\n    return new Promise((resolve) => {\n        mySpires.timeframe(timeframe).then(function(records) {\n            if(Object.keys(records).length === 0) {\n                $currentSection.remove();\n                resolve();\n                return;\n            }\n\n            if(firstSection === true) firstSection = false;\n\n            jQuery.each(records, function (index, record) {\n                new mySpires_Box(record, \"#section-\" + timeframe);\n                // entryBox.loadEntry(entry, \"#section-\" + timeframe);\n            });\n\n            sortPapers(\"modified\", \"desc\", \"#section-\" + timeframe);\n\n            $currentSection.find(\".history-title\").fadeIn(200);\n            resolve();\n        });\n    });\n}\n\nfunction sectionShow(timeframe) {\n    let $currentSection = $(\"#section-\" + timeframe);\n    $currentSection.toggleClass(\"active\");\n\n    if($currentSection.hasClass(\"active\")) {\n        $currentSection.find(\".openable-arrow\").toggleClass(\"fa-angle-double-down fa-angle-double-up\");\n\n        let $ele = $currentSection.find(\".paper-box\").first();\n        let trigger = setInterval(function() {\n            $ele.show(300);\n            $ele = $ele.next();\n            if($ele.length === 0) clearInterval(trigger);\n        }, 10);\n    } else {\n        $currentSection.find(\".openable-arrow\").toggleClass(\"fa-angle-double-down fa-angle-double-up\");\n        $currentSection.find(\".paper-box\").hide(300)\n    }\n}\n\n$(function () {\n    let tagShowPromise = [];\n\n    $(\".history-section\").each(function () {\n        let timeframe = $(this).attr(\"id\").split(\"section-\")[1];\n        tagShowPromise.push(tagShow(timeframe));\n    });\n\n    Promise.all(tagShowPromise).then(function() {\n        sectionShow($(\".history-title\").first().attr(\"id\").split(\"title-\")[1]);\n    });\n\n    $(\".history-title\").click(function () {\n        let timeframe = $(this).attr(\"id\").split(\"title-\")[1];\n        sectionShow(timeframe);\n    });\n});\n\n\nfunction authorShow() {\n    let tag = $(\"#filter-tags\").val();\n    tag = tag.replace(/ /g, \"_\");\n\n    let author = $(\"#filter-authors\").val();\n\n    $(\"div.paper-box\").hide();\n\n    if (author === \"All Authors\") {\n        $(\"div.paper-box.tag-\" + tag).show();\n    } else {\n        $(\"div.paper-box.tag-\" + tag + \".author-\" + author).show();\n    }\n\n    // sortPapers(\"modified\", \"asc\");\n\n    return true;\n}\n\n\n$(\"#filter-authors\").change(authorShow);\n\nfunction sortPapers(method, order, within) {\n    if (method === undefined) method = $(\"#filter-sort\").val();\n    if (order === undefined) order = $(\"#filter-sort-button\").attr(\"order\");\n    if (within === undefined) within = \".paper-boxes\";\n\n    if (method === \"modified\") {\n        $(within + ' div.paper-box:visible').sort(function (a, b) {\n            a = entryBox[$(a).attr(\"id\").split(\"-\")[1]].modifiedDate;\n            b = entryBox[$(b).attr(\"id\").split(\"-\")[1]].modifiedDate;\n            if (order === \"asc\") return (a < b) ? -1 : (a > b) ? 1 : 0;\n            else return (a < b) ? 1 : (a > b) ? -1 : 0;\n        }).appendTo(within);\n    }\n    else if (method === \"published\") {\n        $(within + ' div.paper-box:visible').sort(function (a, b) {\n            a = entryBox[$(a).attr(\"id\").split(\"-\")[1]].publishedDate;\n            b = entryBox[$(b).attr(\"id\").split(\"-\")[1]].publishedDate;\n            if (order === \"asc\") return (a < b) ? -1 : (a > b) ? 1 : 0;\n            else return (a < b) ? 1 : (a > b) ? -1 : 0;\n        }).appendTo(within);\n    }\n\n    return true;\n}"]}